/* empty css                *//* empty css                 */import{d as q,u as N,r as m,a as V,c as S,b as a,w as o,E as F,e as I,o as _,f as R,g as b,h as x,i as A,j as M,k as j,l as p,t as v,m as T,n as h,p as y}from"./index-mlxIPnk9.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"login-container"},G={class:"card-header"},H=q({__name:"LoginView",setup(J){const c=I(),i=N(),s=m(!0),f=m(!1),g=m(!1),d=m(),e=V({username:"",email:"",password:"",confirmPassword:""}),E=V({username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{min:3,max:20,message:"ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦",trigger:"blur"}],email:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±åœ°å€",trigger:"blur"},{type:"email",message:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº 6 ä½",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·ç¡®è®¤å¯†ç ",trigger:"blur"},{validator:(r,l,t)=>{l!==e.password?t(new Error("ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´")):t()},trigger:"blur"}]}),L=()=>{s.value=!s.value,k()},k=()=>{var r;e.username="",e.email="",e.password="",e.confirmPassword="",(r=d.value)==null||r.clearValidate()},C=async()=>{if(d.value)try{if(!await d.value.validate())return;f.value=!0,s.value?(await i.login({username:e.username,password:e.password}),y.success("ç™»å½•æˆåŠŸ"),i.isAdmin()?c.push("/admin"):c.push("/chat")):(await i.register({username:e.username,email:e.email,password:e.password}),y.success("æ³¨å†ŒæˆåŠŸ"),c.push("/chat"))}catch(r){console.error("æäº¤å¤±è´¥:",r)}finally{f.value=!1}},P=async()=>{try{g.value=!0;const r=await i.loginWithLinuxDo();window.location.href=r}catch(r){console.error("Linux.Do ç™»å½•å¤±è´¥:",r),y.error("æ— æ³•å¯åŠ¨ Linux.Do ç™»å½•")}finally{g.value=!1}};return(r,l)=>{const t=M,n=A,w=j,D=T,B=R,U=F;return _(),S("div",z,[a(U,{class:"login-card"},{header:o(()=>[h("div",G,[h("h1",null,v(s.value?"ç™»å½•":"æ³¨å†Œ"),1)])]),default:o(()=>[a(B,{model:e,rules:E,ref_key:"formRef",ref:d,"label-width":"80px"},{default:o(()=>[a(n,{label:"ç”¨æˆ·å",prop:"username"},{default:o(()=>[a(t,{modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=u=>e.username=u),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),s.value?x("",!0):(_(),b(n,{key:0,label:"é‚®ç®±",prop:"email"},{default:o(()=>[a(t,{modelValue:e.email,"onUpdate:modelValue":l[1]||(l[1]=u=>e.email=u),placeholder:"è¯·è¾“å…¥é‚®ç®±",type:"email"},null,8,["modelValue"])]),_:1})),a(n,{label:"å¯†ç ",prop:"password"},{default:o(()=>[a(t,{modelValue:e.password,"onUpdate:modelValue":l[2]||(l[2]=u=>e.password=u),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ","show-password":""},null,8,["modelValue"])]),_:1}),s.value?x("",!0):(_(),b(n,{key:1,label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:o(()=>[a(t,{modelValue:e.confirmPassword,"onUpdate:modelValue":l[3]||(l[3]=u=>e.confirmPassword=u),type:"password",placeholder:"è¯·ç¡®è®¤å¯†ç ","show-password":""},null,8,["modelValue"])]),_:1})),a(n,null,{default:o(()=>[a(w,{type:"primary",onClick:C,loading:f.value,style:{width:"100%"}},{default:o(()=>[p(v(s.value?"ç™»å½•":"æ³¨å†Œ"),1)]),_:1},8,["loading"])]),_:1}),a(n,null,{default:o(()=>[a(w,{type:"text",onClick:L,style:{width:"100%"}},{default:o(()=>[p(v(s.value?"æ²¡æœ‰è´¦å·ï¼Ÿå»æ³¨å†Œ":"å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•"),1)]),_:1})]),_:1}),a(D,null,{default:o(()=>[...l[4]||(l[4]=[p("æˆ–",-1)])]),_:1}),a(n,null,{default:o(()=>[a(w,{onClick:P,style:{width:"100%"},loading:g.value},{default:o(()=>[...l[5]||(l[5]=[h("span",{style:{"margin-right":"8px"}},"ğŸ§",-1),p(" ä½¿ç”¨ Linux.Do è´¦å·ç™»å½• ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}}),Z=W(H,[["__scopeId","data-v-32cd3342"]]);export{Z as default};
